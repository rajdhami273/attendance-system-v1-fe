<div class="col-lg-12">
  <div class="card">
    <div class="card-header">
      <div class="row">
        <div class="col-sm-6">
          <i class="fa fa-align-justify"></i> Attendance
        </div>
        <div class="col-sm-6">
          <!-- <form [formGroup]="dateForm"> -->
          <!-- <div class="form-group row"> -->
            <label class="col-sm-2 col-form-label" for="date-input">For</label>
            <div class="col-sm-9">
              <input
                class="form-control float-left"
                id="date-input"
                type="date"
                name="date-input"
                placeholder="date"
                [(ngModel)]="date"
              />
            </div>
            <!-- {{date}} -->
          <!-- </div> -->
        <!-- </form> -->
        </div>
      </div>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Roll No.</th>
              <th>Name</th>
              <th>
                <div class="row">
                  <div class="col-mg-4">
                    <div class="col-6 col-sm-4 col-md-2 col-xl mb-3 mb-xl-0">
                      <button
                        type="button"
                        (click)="markAll('p')"
                        class="btn btn-sm {{
                          isMarkAll('p') ? 'btn-primary active' : ''
                        }}"
                        aria-pressed="true"
                      >
                        Present All
                      </button>
                    </div>
                  </div>
                  <div class="col-mg-4">
                    <div class="col-6 col-sm-4 col-md-2 col-xl mb-3 mb-xl-0">
                      <button
                        type="button"
                        (click)="markAll('a')"
                        class="btn btn-sm {{
                          isMarkAll('a') ? 'btn-danger active' : ''
                        }}"
                        aria-pressed="true"
                      >
                        Absent All
                      </button>
                    </div>
                  </div>
                </div>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let s of students; let i = index">
              <td>{{ s.rollNo }}</td>
              <td>{{ s.studentName }}</td>
              <td>
                <div class="row">
                  <div class="col-mg-4">
                    <div class="col-6 col-sm-4 col-md-2 col-xl mb-3 mb-xl-0">
                      <button
                        type="button"
                        (click)="s.attendance = true"
                        class="btn btn-sm {{
                          s.attendance ? 'btn-primary active' : ''
                        }}"
                        aria-pressed="true"
                      >
                        Present
                      </button>
                    </div>
                  </div>
                  <div class="col-mg-4">
                    <div class="col-6 col-sm-4 col-md-2 col-xl mb-3 mb-xl-0">
                      <button
                        type="button"
                        (click)="s.attendance = false"
                        class="btn btn-sm {{
                          !s.attendance ? 'btn-danger active' : ''
                        }}"
                        aria-pressed="true"
                      >
                        Absent
                      </button>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- <ul class="pagination">
        <li class="page-item"><a class="page-link" href="#">Prev</a></li>
        <li class="page-item active">
          <a class="page-link" href="#">1</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">4</a></li>
        <li class="page-item"><a class="page-link" href="#">Next</a></li>
      </ul> -->
      <div class="col-mg-4">
        <div class="col-6 col-sm-4 col-md-2 col-xl mb-3 mb-xl-0">
          <button
            type="button"
            (click)="saveAttendance()"
            class="btn btn-block btn-success active"
            aria-pressed="true"
            [disabled]="!classId || !subjectId || disableButton"
          >
            {{ savingData ? "Saving the attendance..." : "Save" }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  #submitModal
  id="submitModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
  data-backdrop="static"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Attendance Submitted</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <h4>Thank you for submitting the attendance</h4>
          </div>
          <div class="col-sm-12">
            <label>Count for the day: </label>
          </div>
          <div class="col-sm-12">
            <div class="alert alert-success" role="alert">
              Present: {{ getTotal("p") }}
            </div>
          </div>
          <div class="col-sm-12">
            <div class="alert alert-danger" role="alert">
              Absent: {{ getTotal("a") }}
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button> -->
        <button type="button" class="btn btn-primary" data-dismiss="modal" [routerLink]="['/year']">Close</button>
      </div>
    </div>
  </div>
</div>
